---
title: Docusaurus 的多实例文档部署
tags: 
- docusaurus
categories:
- 前端技术
---

# Docusaurus 的多实例文档部署

要实现多实例文档部署其实非常简单，按照[官方文档](https://docusaurus.io/zh-CN/docs/docs-multi-instance)就可以操作。但是里面有一些坑需要回避。


有两种部署方式：
1. 在`doc`文件夹内部再添加文件夹，这种方式可以控制版本。
2. 在根目录下添加文件夹，这种方式不能控制版本。

本篇讲述第2种方式。第一种方式可以参考[这篇文章](https://www.gitmemory.com/issue/facebook/docusaurus/3299/675409985)。

## 目录结构

```
docs/
- doc1.md
resources/
- doc2.md
```

如上加入了`resources`文件夹，里面包含了`doc2.md`文件。

## 修改文件

在`docusaurus.config.js`文件中需要做出如下**最小**修改：

```js title="docusaurus.config.js"
module.exports = {
  plugins: [
    [
      '@docusaurus/plugin-content-docs',
      {
        id: 'resources',
        path: 'resources',
        routeBasePath: 'resources',
        sidebarPath: require.resolve('./sidebarsResources.js'),
        // ... 其他设置
      },
    ],
  ],
  themeConfig: {
    navbar: {
      items: [{
      {
        // highlight-next-line
        to: '/resources/doc2',   // 这里要指定具体的index文档
        activeBasePath: 'resources',
        label: '这里是文档2',
        position: 'left'
      },
      }]
    }
  }
};
```

最后是对sidebars的调整

```js title='./sidebarsResources.js'
module.exports = {
    resources: [{ type: 'autogenerated', dirName: '.' }],
}
```
