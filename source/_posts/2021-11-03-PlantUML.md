---
title: PlantUML
date: 2021-11-03 15:43:52
tags:
- plantuml
categories:
- 前端技术
---

- [**所有图例汇总**](https://plantuml.com/zh/deployment-diagram)

## 类图

```plnatuml
@startuml
abstract        抽象
abstract class  抽象(等同abstract)
annotation      注解
circle          圆
()              圆缩写形式
class           类
diamond         菱形
<>              菱形写形式
entity          实例
enum            枚举
interface       接口
@enduml
```
![](http://121.196.175.55:9999/png/SoWkIImgAStDuKfCAYufIamkKO22PrrxNsnSY11EpaaiBeO9QpnVs_bqGWzCKfChCIylloIn93C_3wfxyueNonTp9MSM9UUaAi31qpbjN1gQ2YW0AFPypygdRJEVxbtqT4y_5zGYE7Y-SJTNIcPYRdvU2bpiHVz6e6ek6pjKeo322ADIyqeoIogHh5etxyc-Rg1mQIwojcVpPZtPiOyhCwyajIWjCHdctcTzIv_sB-PoICrB0GOG0000)

线标记
- `--|>` 继承
- `--*` 组合
- `--o` 聚合

方法和属性的访问性质
- `+` public
- `-` private
- `#` protected
- `~` package

### 辅助布局

```plnatuml
@startuml

class Bar1
class Bar2
together {
  class Together1
  class Together2
  class Together3
}
Together1 - Together2
Together2 - Together3
Together2 -[hidden]--> Bar1
Bar1 -[hidden]> Bar2


@enduml
```

加入了`together`和`-[hidden]-`来支持辅助布局

### 命名空间

```plantuml
@startuml namespace

class net.Network {
    int address

    ip_prefix()
}
@enduml
```

![](http://121.196.175.55:9999/png/SoWkIImgAStDKSXBp4qjBaXCJkNYIiv9B2vMo4ijqVDBBIdFByfMgEPI08BCl1A5n9IKejJYOYw8G45yGL5gMcQ5XYPNBPT3QbuAq2G0)


## 时序图

- ++ 激活目标（可选择在后面加上#color）
- -- 撤销激活源
- ** 创建目标实例
- !! 摧毁目标实例

```plantuml
@startuml
alice -> bob ++: hello
bob -> bob ++: self call
bob -> bib ++ #green: hello
bob -> george **: **create**
return done
return rc
bob -> george !! : delete
return succuse
@enduml
```

![时序图](http://121.196.175.55:9999/png/NOin2e0m54DtJn5ngtY13jwbVcCLFYtyjlTN1qKS0abU4lGGOfgnv0NZwB5JDNTt-fI5ka62wWkE6s28HgRVAJ9R99ppbyGOAfthZBLPmfeJ7s_ok_GzF5OgwxifJQGLdW00)


锚点和持续时间

```plantuml
@startuml
!pragma teoz true

{start} Alice -> Bob : start doing things during duration
Bob -> Max : something
Max -> Bob : something else
{end} Bob -> Alice : finish

{start} <-> {end} : some time

@enduml
```

![锚点和持续时间](http://121.196.175.55:9999/png/HOxH3S8m34J_FSKn00jK2AdyCqGWfhNKn2Xn9KJLtKaQglxOklCxswTtSaDmCDOlBCrCj6HpoLRqapmPvojk-a27pOLNYGDiB3N3pwcgqfo9HgfWuU_kKtaDl75KzR5cjy5JPbeu-XN_OBlOuILHydXySYcp1hOyJ0B_0000)

## 用例图

![用例图](http://121.196.175.55:9999/png/JOzB4WCX20NtxnHSZIYJik98mk0Yjm_ChxBfrmKgmiNLY9FWfmoddM3pjaIPBi53vwXiNxe4XQrI0gNh34sYwFhMaI_T5hNXfftEH6Nd1sz2bo1EDV_I4N6-TodUT6pqvrXQ5qfWqLx5w0WinciqacZ3nUB7GdGhXbQX1DvSNh4YdOdFb2cq4vj7aNR2OYQFPyoxBVfgUVTCp4rARd7c3m00)


## 活动图

```plantuml
@startuml

start
:ClickServlet.handleRequest();
:new page;
if (Page.onSecurityCheck) then (true)
  :Page.onInit();
  if (isForward?) then (no)
    :Process controls;
    if (continue processing?) then (no)
      stop
    endif

    if (isPost?) then (yes)
      :Page.onPost();
    else (no)
      :Page.onGet();
    endif
    :Page.onRender();
  endif
else (false)
endif

if (do redirect?) then (yes)
  :redirect process;
else
  if (do forward?) then (yes)
    :Forward request;
  else (no)
    :Render page template;
  endif
endif

stop

@enduml
```

![](http://121.196.175.55:9999/png/PL4xRiCm3Drr2exsaWF8GuS0BRe5oGa4YOw5g98hqWbo--fZkMupIU3xuF6HM4KMykYilbqmtXtoOLBUE3pZzuB4NJy8wV41ixhY8Em8tIdz3i5VK2_HylCueRxrm1Dww3Wks0i0kP8-lIqM05bfwJt4XuhchV5zoEpCZq4Z4UZWEGP7GnbdKPvOlo3CbMBzzKKEG1pcyaLlx2WsjQLJ8Du4JwIcQ14pNYCciIFSkpRE1_vIYlyUFASHnefNjDgCAZszM0FbC2P0H6CZwfT4iW5jpQ6uhCKbuVYlkMqJkNQQhCl5Iem_UyYQi9mG6BzcfnXtQMl0tE0F)


## 组件图

```plantuml
@startuml
title **组件图**

package "ServiceLayer" {
    [MessageBus] as bus
    bus -> [Handlers]
    component "Unit of Work" {
        [Abstract UoW] as abuow
        abuow <|. [SQLA UoW]
    }
    [Handlers] -> abuow
}

cloud cloud
cloud --> [API]

[API] --> bus : Commands
[Eventconsumer] --> bus : Commands

[API] --> [Bootstrap]
[Eventconsumer] --> [Bootstrap]
[Bootstrap] --> bus


package "Adapters" {
    component "Repositories" {
        [Abstract Repository] as abrepo
        abrepo <|. [SQLA Repository]
    }
    [Redis\nEvent\nPublisher] as redis
    [etc]
}

abuow --> abrepo
[SQLA UoW] --> [SQLA Repository]


package "Domain" {
    [Aggregate] -> [Entity]
    [Entity] --> [Value Object]
    [Event]
    [Command]
}

Adapters -> Domain

database database

[External Message Broker] as ex_message
ex_message --> [Eventconsumer]
ex_message <-- redis

[SQLA Repository] --> database
@enduml
```

![](http://121.196.175.55:9999/png/RLBDJi904BxlKqmuak03669Ib4GJZ0X13eMORHbnfTrjThS8KMw-XU_XXSIdqVWQxayBIw2NpiytCzzyivhf3A7P_Dj-_6o_VZ-_cqr22fekw1oXCKIvP2dsw1fb0zu8c2--HQLCjbEgAL05IQbStFoXTG7nDUMp3AMQkcWgya9mv1eQ8yuqY2SO2xcecxc6KQAqfAc6aHYxbZGfnUikxpnelvz1FBplHGxbaXlFPpVGZlUb6qBYg7zZ8YPaYPt3fSXp0rGaxYuDdLHmLUOeJqA2uhWZXBRqYkd9oeFytgwxaa3CQ4OBRNZMkmVI3B0GYcaX6QhJqkmGwqeXQGA1HDODD0hWeLG3d34ruMwF2U-NISRKirt5j9Gsvs6eqwdLq2lVShAwUVi3-EMFPWNhNecSChvxDT5yBd5EDRepnLskcQx8rOxl-K2p4k4kUS5KrtdBjxAh8pb-jQAsenz7o8ngcb25K1lccjsLGN6QGVLqeIF5ebeRLu-vZvAzwPaSdZjCjrkjIYzof86hhOV_0m00)


## 状态图

```plantuml
@startuml
state choice1 <<choice>>
state fork1   <<fork>>
state join2   <<join>>
state end3    <<end>>

[*]     --> choice1 : from start\nto choice
choice1 --> fork1   : from choice\nto fork
choice1 --> join2   : from choice\nto join
choice1 --> end3    : from choice\nto end

fork1   ---> State1 : from fork\nto state
fork1   --> State2  : from fork\nto state

State2  --> join2   : from state\nto join
State1  --> [*]     : from state\nto end

join2   --> [*]     : from join\nto end
@enduml
```

![](http://121.196.175.55:9999/png/TP0n3eCm34Ltdy9pfGpGhKAvHCUsGmL1qAg9579_rJPn2WhTp7ylyGzBUYQ7_HJctZNOTUjaBIm2nX3V3I81dahy2hDl9UQfnCuFPvIO9ahXTdhmDnfZouuBZZ5ya4x4TFSfP03AsTMrsLsHo4nsgbQfLIOxLUlLAX40NMhOlVA3Ibb68iexDsOMM_nZWkA3gcByckQDOkf_gqmfglSSc8nK_080)

## 对象图

```plantuml
@startuml
object London
object Washington
object Berlin
object NewYork

map CapitalCity {
 UK *-> London
 USA *--> Washington
 Germany *---> Berlin
}

NewYork --> CapitalCity::USA
@enduml
```

![](http://121.196.175.55:9999/png/oq_AIaqkKV39pql9p-FAX_324uipClFIIn0YJgb5EPbmdbzgUMH-KJONLsvYWO9pOa5cIMAESsP9fK8rbqAejuAMhXtCG8NGO4SW7oY0PAQ2UsfHRc9U9KW2A0CrkvQB2sgk0aWKoLWhAw0f0000)

## 思维导图

```plantuml
@startmindmap
caption figure 1
title My super title

* <&flag>Debian
** <&globe>Ubuntu
*** Linux Mint
*** Kubuntu
*** Lubuntu
*** KDE Neon
** <&graph>LMDE
** <&pulse>SolydXK
** <&people>SteamOS
** <&star>Raspbian with a very long name
*** <s>Raspmbc</s> => OSMC
*** <s>Raspyfi</s> => Volumio

left side

** Windows 95
** Windows 98
** Windows NT
*** Windows 8
*** Windows 10


header
My super header
endheader

center footer My super footer

legend right
  Short
  legend
endlegend
@endmindmap
```

![](http://121.196.175.55:9999/png/LP5DRuCm38Rl_XK-xS1bws5I9x6eqjeJfPN6lgu134GAIPIFTVpx4Q0LlSH-tjTox6JdFBU-5whkkS66GyMD5rfX8zfW2JVWXPU4-O0k6B8u8K22wKCZUSlsL0gk88b2AtL9xBCCoeTHIV0eLFZ3N2W_OHPMrYhFzWSyaRvsiTnqx9Zl3pER81snGikX_iaMYRIHe-Q9z-TYrk8Yx9qx4-V1Y_0TSlmbEw3KgaN5UvekIzrKrPTL-kWOlZ8y5_dRsXeQSRM-j0ozq02I6ezEr77r1B_7zz8NXo_FTxHTq-bZwdd5xHrjdW2W8rwJXTlJBaogNZAeIFdHQBIEuLOuSnog7OlHYhRpW5XqsiOuox7Fakt6O_dYVm00)